<!DOCTYPE html>
<html class="no-js">
  <head>
    <link href="https://fonts.googleapis.com/css?family=Work+Sans:400,300,600,400italic,700" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/css?family=Sacramento" rel="stylesheet" />

    <!-- Animate.css -->
    <link rel="stylesheet" href="css/animate.css" />
    <!-- Icomoon Icon Fonts-->
    <link rel="stylesheet" href="css/icomoon.css" />
    <!-- Bootstrap  -->
    <link rel="stylesheet" href="css/bootstrap.css" />
    <!-- Magnific Popup -->
    <link rel="stylesheet" href="css/magnific-popup.css" />
    <!-- Owl Carousel  -->
    <link rel="stylesheet" href="css/owl.carousel.min.css" />
    <link rel="stylesheet" href="css/owl.theme.default.min.css" />
    <!-- Theme style  -->
    <link rel="stylesheet" href="css/style.css" />
    <!-- Modernizr JS -->
    <script src="js/modernizr-2.6.2.min.js"></script>
    <!-- FOR IE9 below -->
    <!--[if lt IE 9]>
      <script src="js/respond.min.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <div class="fh5co-loader"></div>

    <div id="page">
      <nav class="fh5co-nav" role="navigation">
        <div class="container">
          <div class="row">
            <div class="col-xs-2">
              <div id="fh5co-logo">
                <a href="index.html">J+L<strong>.</strong></a>
              </div>
            </div>
            <div class="col-xs-10 text-right menu-1">
              <ul>
                <li><a href="index.html">Tuisblad</a></li>
                <li class="active"><a href="about.html">RSVP</a></li>
                <li><a href="contact.html">Inligtingblad</a></li>
              </ul>
            </div>
          </div>
        </div>
      </nav>

      <header
        id="fh5co-header"
        class="fh5co-cover fh5co-cover-sm"
        role="banner"
        style="background-image: url(images/photohome.jpeg)"
      >
        <div class="overlay"></div>
        <div class="fh5co-container">
          <div class="row">
            <div class="col-md-8 col-md-offset-2 text-center">
              <div class="display-t">
                <div
                  class="display-tc animate-box"
                  data-animate-effect="fadeIn"
                >
                  <h1>RSVP</h1>
                </div>
              </div>
            </div>
          </div>
        </div>
      </header>

      <div id="fh5co-contact">
        <div class="container">
          <div class="row animate-box">
            <div class="col-md-8 col-md-offset-2 text-center fh5co-heading">
              <p>
                Vul asseblief die vorm in vir elke gas wat saam met jou kom<br>
							  RSVP voor <strong>1 Februarie 2026</strong>
              </p>
            </div>
          </div>

          <div class="row">
            <div class="col-md-10 col-md-offset-1 animate-box">
              <form
                id="rsvp-form"
                name="rsvp"
                method="POST"
                data-netlify="true"
              >
                <input type="hidden" name="form-name" value="rsvp">   
                <input type="hidden" name="guests_data" id="guests_data">

                <!-- Number of guests -->
                <div class="row form-group">
                  <div class="col-md-4">
                    <label for="guestCount">Hoeveel gaste wil jy RSVP?</label>
                    <select id="guestCount" name="guest_count" class="form-control">
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                      <option value="6">6</option>
                      <option value="7">7</option>
                      <option value="8">8</option>
                      <option value="9">9</option>
                      <option value="10">10</option>
                    </select>
                  </div>
                </div>

                <!-- Guest blocks will be injected here -->
                <div id="guest-container"></div>
                <div class="form-group text-center">
                  <button type="submit" class="btn btn-primary btn-lg">
                    Stuur RSVP
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

      <footer id="fh5co-footer" role="contentinfo">
        <div class="container">
          <div class="row copyright">
            <div class="col-md-12 text-center">
              <p>“Wat God dan saamgevoeg het, mag geen mens skei nie.”</p>
              <span>Markus 10:9</span>
            </div>
          </div>
        </div>
      </footer>
    </div>

    <div class="gototop js-top">
      <a href="#" class="js-gotop"><i class="icon-arrow-up"></i></a>
    </div>

    <!-- jQuery -->
    <script src="js/jquery.min.js"></script>
    <!-- jQuery Easing -->
    <script src="js/jquery.easing.1.3.js"></script>
    <!-- Bootstrap -->
    <script src="js/bootstrap.min.js"></script>
    <!-- Waypoints -->
    <script src="js/jquery.waypoints.min.js"></script>
    <!-- Carousel -->
    <script src="js/owl.carousel.min.js"></script>
    <!-- countTo -->
    <script src="js/jquery.countTo.js"></script>

    <!-- Stellar -->
    <script src="js/jquery.stellar.min.js"></script>
    <!-- Magnific Popup -->
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/magnific-popup-options.js"></script>

    <!-- Main -->
    <script src="js/main.js"></script>

    <script>
    // Verwysings na DOM-elemente
    const guestContainer = document.getElementById("guest-container");
    const guestCountSelect = document.getElementById("guestCount");

    /*
      * Skep 'n gas-blok gebaseer op indeks
      * @param {number} index
      * @returns {string} HTML string
    */
      function createGuestBlock(index) {
      return `
      <fieldset class="guest-block">
        <legend>Gas ${index + 1}</legend>

        <div class="row form-group">
          <div class="col-md-6">
            <label>Voornaam</label>
            <input
              type="text"
              name="gas_${index}_voornaam"
              class="form-control"
              required
            >
          </div>
          <div class="col-md-6">
            <label>Van</label>
            <input
              type="text"
              name="gas_${index}_van"
              class="form-control"
              required
            >
          </div>
        </div>

        <div class="row form-group">
          <div class="col-md-6">
            <label>Gaan jy die troue bywoon?</label>
            <select
              name="gas_${index}_bywoning"
              class="form-control attending"
            >
              <option value="ja">Ja</option>
              <option value="nee">Nee</option>
            </select>
          </div>

          <div class="col-md-6">
            <label>Dieetvereistes</label>
            <input
              type="text"
              name="gas_${index}_dieet"
              class="form-control"
              placeholder="Geen / Vegetaries / Allergieë"
            >
          </div>
        </div>

        <div class="row form-group">
          <div class="col-md-6">
            <label>Liedjie-voorstel</label>
            <input
              type="text"
              name="gas_${index}_liedjie"
              class="form-control"
            >
          </div>

          <div class="col-md-6">
            <label>Bly jy by die venue?</label>
            <select
              name="gas_${index}_verblyf"
              class="form-control accommodation"
            >
              <option value="nee">Nee</option>
              <option value="enkel">Enkelkamer – R250 p/n</option>
              <option value="paartjie">Paartjie-kamer – R900 p/n</option>
              <option value="gesin">Gesinskamer – R1500 p/n</option>
            </select>
          </div>
        </div>
      </fieldset>
    `;
    }

      /* Render al die gas-blokke volgens die geselekteerde aantal*/
      function renderGuests() {
      guestContainer.innerHTML = "";
      const count = parseInt(guestCountSelect.value, 10);

      for (let i = 0; i < count; i++) {
      guestContainer.insertAdjacentHTML(
        "beforeend",
        createGuestBlock(i)
      );
      }
      } 

      // Her-render wanneer die aantal gaste verander
      guestCountSelect.addEventListener("change", renderGuests);

      // Initial render
      renderGuests();
    </script>


    <script>
      document.getElementById("rsvp-form").addEventListener("submit", function(e) {
  const guestBlocks = document.querySelectorAll(".guest-block");
  const gaste = [];

  guestBlocks.forEach((block, index) => {
    gaste.push({
      voornaam: block.querySelector(`[name="gas_${index}_voornaam"]`)?.value || "",
      van: block.querySelector(`[name="gas_${index}_van"]`)?.value || "",
      bywoning: block.querySelector(`[name="gas_${index}_bywoning"]`)?.value || "",
      dieet: block.querySelector(`[name="gas_${index}_dieet"]`)?.value || "",
      liedjie: block.querySelector(`[name="gas_${index}_liedjie"]`)?.value || "",
      verblyf: block.querySelector(`[name="gas_${index}_verblyf"]`)?.value || ""
    });
  });

  document.getElementById("guests_data").value = JSON.stringify(gaste, null, 2);

  // Show popup
  const niemandKomNie = gaste.every(g => g.bywoning === "nee");
  $.magnificPopup.open({
    items: { src: niemandKomNie ? '#rsvp-nee' : '#rsvp-sukses' },
    type: 'inline'
  });

  // **Remove e.preventDefault()**
  // Let Netlify handle the form submit
});

    </script>

    <!-- RSVP Sukses Popup -->
    <div id="rsvp-sukses" class="mfp-hide white-popup">
      <h2>Baie dankie!</h2>
      <p>
        Dankie dat jy ons RSVP ingevul het.
        Ons sien baie daarna uit om die dag saam met almal te vier! Sien asb ons <strong>inligtingblad</strong> oor praktiese reelings vir ons groot dag
      </p>
    </div>

    <!-- RSVP Ongelukkig Popup -->
    <div id="rsvp-nee" class="mfp-hide white-popup">
      <h2>Ons verstaan</h2>
      <p>
        Ons is jammer om te hoor dat julle nie saam met ons kan wees op ons
        troudag nie. Julle sal beslis in ons gedagtes wees
      </p>
    </div>
  </body>
</html>
